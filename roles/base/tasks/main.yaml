- name: install base packages
  become: true
  apt:
    name: "{{item}}"
    state: latest
  with_items:
    - apt-transport-https
    - ca-certificates
    - cron
    - curl
    - mosh
    - manpages
    - manpages-dev
    - openssh-server
    - software-properties-common

- name: allow SSH connections
  become: true
  ufw:
    rule: allow
    name: OpenSSH

- name: allow nginx connections
  become: true
  ufw:
    rule: allow
    name: Nginx Full

- name:  allow mosh connections
  become: true
  ufw:
    rule: allow
    name: mosh

- name: enable firewall
  become: true
  ufw:
    state: enabled
    logging: "off"
